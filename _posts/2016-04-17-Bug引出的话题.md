---
layout: post
title: "Bug不可避免，Bug可以受控"
tags: [Bug]
---

任何开发团队，速度和代码质量是永恒的话题。伴随着越来越多的功能被实现，代码量急剧增大，Bug不可避免的骚扰着我们本已脆弱的心灵。无休止的Bug修复，旧Bug的修复来带新的Bug，这种恶性的循环困扰整个团队，最终的结局往往只有两种：1.代码无法维护，只能被抛弃； 2. 无法迭代导致项目失败

面对Bug，我们怎么办？个人观点：Bug不可避免，Bug可以受控。

# Bug不可避免

  开发人员的共识：Bug不可避免。

  为什么不可避免？我想主要是两个原因导致我们能够接受Bug存在的事实：

  * 我们无法穷尽所有的可能性
  * 尝试让代码没有Bug的性价比极低



# 如何让Bug受控

  既然想让Bug受控，那么我们先要认识Bug，了解Bug。

## Bug的来源

  产生Bug的原因很多很多，绝大部分可以归到以下3种情况之一:

  * 未预测到的异常输入
  * 程序员人为失误
  * 代码变更（新增特性、修复Bug等）

## Bug的处理手段：预防 & 修复

### 未预测到的异常输入

  针对这类情况可能产生的Bug，我们从两方面入手：

   * 预防：对于关键性（产生重大影响的）因素必须经过严格的测试
   * Bug修复： 对于非关键性因素导致的Bug要有快速修复的能力（快速发现、快速定位、快速修复）

### 程序员人为失误

  只要是人就不可能不犯错，程序员也如此。减少产生人为失误的可能性是减少Bug的关键。这个主要从预防入手：

  * 尽可能的少编写代码（复用成熟代码）: 编写的代码越多，产生Bug的概率越大。尽可能复用成熟的代码，减少自己编写的代码有助于降低Bug产生的可能性。
  * 编写可阅读性高的代码：有良好阅读性的代码，错误代码隐藏的可能性较低，有助于降低Bug产生的可能性。清晰的逻辑，统一的风格有助于提升代码的可阅读性。
  * BDD/TDD：测试是对最终结果的表述，它有助于程序员理解业务逻辑，同时也是对代码正确性的二次校验。

### 代码变更引发的Bug

  因为代码变更而导致Bug，特别是因为修Bug而导致新Bug，一般情况是由于代码质量问题导致的。 解决的办法也是以预防为主：

  * 编写高质量代码：高内聚、松耦合，避免意大利面式代码

    ![敏捷金三角](/images/articles/agile-triangle.jpg)

    > 内部质量一般指用户看不到的要素,它们对系统的可维护性有深远影响。可维护性包括系统设计的一致性、测试覆 盖率、代码可读性和重构等等。
    > 内部质量就没什么好说的了。不管什么时候,团队都要保证系 统质量,这一点毋庸置疑,也没有折扣可讲。现在如此、将来如此、 一直如此,直到永远。
    > 《硝烟中的Scrum和XP》

  * 代码Review：在团队层面提升代码质量


## 参考资料
  * [通过“敏捷三角形”度量敏捷成效](http://www.infoq.com/cn/news/2009/08/agile-triangle/)
  * [Beyond Scope, Schedule, and Cost: Measuring Agile Performance](http://blog.cutter.com/2009/08/10/beyond-scope-schedule-and-cost-measuring-agile-performance/)
  * [硝烟中的Scrum和XP](http://vdisk.weibo.com/s/iZnSiFhp_NeT), 2009, P12, Henrik Kniberg, 李剑(译)